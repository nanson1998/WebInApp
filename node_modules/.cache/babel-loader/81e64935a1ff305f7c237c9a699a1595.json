{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/lap12580/Documents/webInApp/src/components/login/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { loginWithEmail } from \"../../lib/api/api\";\nimport { Button } from \"@material-ui/core\";\nimport { keyUserLoginToken } from \"../../lib/config/keys\";\n\nfunction LoginComponent() {\n  _s();\n\n  let [user, setUser] = useState(\"not login\");\n\n  const handleLogin = async () => {\n    const response = await loginWithEmail(\"ncn001-dl\", \"12345\");\n    console.log(\"data:\", JSON.stringify(response, null, 2));\n\n    if (!response.success) {\n      if (response.error === 401) {\n        localStorage.removeItem(keyUserLoginToken);\n        window.location.href = \"http://localhost:3000/login\";\n      } else {\n        // todo: handle error -> show message\n        setUser(JSON.stringify(response, null, 2));\n      }\n    } else {\n      localStorage.setItem(keyUserLoginToken, JSON.stringify(response));\n      setTimeout(() => {\n        handleLogged();\n      }, 3000);\n    }\n  };\n\n  useEffect(() => {\n    handleLogged();\n  }, [user]);\n\n  function handleLogged() {\n    const uLocal = localStorage.getItem(keyUserLoginToken);\n    console.log(\"uLocal: \", uLocal); // todo: goto dashboard or homepage\n\n    if (uLocal) {\n      window.location.href = \"http://localhost:3000\";\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleLogin,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LoginComponent, \"IL85i3OChg58Ru9yCZxFmpGAv0g=\");\n\n_c = LoginComponent;\nexport default LoginComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginComponent\");","map":{"version":3,"sources":["/Users/lap12580/Documents/webInApp/src/components/login/index.tsx"],"names":["React","useEffect","useState","loginWithEmail","Button","keyUserLoginToken","LoginComponent","user","setUser","handleLogin","response","console","log","JSON","stringify","success","error","localStorage","removeItem","window","location","href","setItem","setTimeout","handleLogged","uLocal","getItem"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,iBAAT,QAAkC,uBAAlC;;AAEA,SAASC,cAAT,GAA0B;AAAA;;AACxB,MAAI,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAM,WAAN,CAA9B;;AAEA,QAAMO,WAAW,GAAG,YAAY;AAC9B,UAAMC,QAAQ,GAAG,MAAMP,cAAc,CAAC,WAAD,EAAc,OAAd,CAArC;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,IAAI,CAACC,SAAL,CAAeJ,QAAf,EAAyB,IAAzB,EAA+B,CAA/B,CAArB;;AACA,QAAI,CAACA,QAAQ,CAACK,OAAd,EAAuB;AACrB,UAAIL,QAAQ,CAACM,KAAT,KAAmB,GAAvB,EAA4B;AAC1BC,QAAAA,YAAY,CAACC,UAAb,CAAwBb,iBAAxB;AACAc,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB;AACD,OAHD,MAGO;AACL;AACAb,QAAAA,OAAO,CAACK,IAAI,CAACC,SAAL,CAAeJ,QAAf,EAAyB,IAAzB,EAA+B,CAA/B,CAAD,CAAP;AACD;AACF,KARD,MAQO;AACLO,MAAAA,YAAY,CAACK,OAAb,CAAqBjB,iBAArB,EAAwCQ,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAAxC;AACAa,MAAAA,UAAU,CAAC,MAAM;AACfC,QAAAA,YAAY;AACb,OAFS,EAEP,IAFO,CAAV;AAGD;AACF,GAjBD;;AAmBAvB,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,YAAY;AACb,GAFQ,EAEN,CAACjB,IAAD,CAFM,CAAT;;AAIA,WAASiB,YAAT,GAAwB;AACtB,UAAMC,MAAM,GAAGR,YAAY,CAACS,OAAb,CAAqBrB,iBAArB,CAAf;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBa,MAAxB,EAFsB,CAGtB;;AACA,QAAIA,MAAJ,EAAY;AACVN,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,uBAAvB;AACD;AACF;;AAED,sBACE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA,gBAAMd;AAAN;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAEE,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA,kBADF;AAOD;;GA1CQH,c;;KAAAA,c;AA4CT,eAAeA,cAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { loginWithEmail } from \"../../lib/api/api\";\nimport { Button } from \"@material-ui/core\";\nimport { keyUserLoginToken } from \"../../lib/config/keys\";\n\nfunction LoginComponent() {\n  let [user, setUser] = useState<any>(\"not login\");\n\n  const handleLogin = async () => {\n    const response = await loginWithEmail(\"ncn001-dl\", \"12345\");\n    console.log(\"data:\", JSON.stringify(response, null, 2));\n    if (!response.success) {\n      if (response.error === 401) {\n        localStorage.removeItem(keyUserLoginToken);\n        window.location.href = \"http://localhost:3000/login\";\n      } else {\n        // todo: handle error -> show message\n        setUser(JSON.stringify(response, null, 2));\n      }\n    } else {\n      localStorage.setItem(keyUserLoginToken, JSON.stringify(response));\n      setTimeout(() => {\n        handleLogged();\n      }, 3000);\n    }\n  };\n\n  useEffect(() => {\n    handleLogged();\n  }, [user]);\n\n  function handleLogged() {\n    const uLocal = localStorage.getItem(keyUserLoginToken);\n    console.log(\"uLocal: \", uLocal);\n    // todo: goto dashboard or homepage\n    if (uLocal) {\n      window.location.href = \"http://localhost:3000\";\n    }\n  }\n\n  return (\n    <>\n      <p>Login</p>\n      <pre>{user}</pre>\n      <Button onClick={handleLogin}>Login</Button>\n    </>\n  );\n}\n\nexport default LoginComponent;\n"]},"metadata":{},"sourceType":"module"}